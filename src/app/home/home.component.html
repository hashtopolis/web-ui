<div class="home-grid">
  <div
    [ngClass]="{
      'ro-1': true,
      'ro-m': screenM,
      'ro-l': screenL,
      'ro-s': screenS,
      'ro-xs': screenXS,
      'ro-xl': screenXL
    }"
  >
    <div class="co co-25">
      <mat-card>
        <mat-card-content>
          <div class="icon-wrapper point" [routerLink]="['/agents/show-agents']">
            <mat-icon>dns</mat-icon>
          </div>
          <h3>Agents</h3>
          <span *ngIf="canReadAgents; else noPermAgents" class="value">
            {{ activeAgents.toLocaleString() }} / {{ totalAgents.toLocaleString() }}
          </span>
          <ng-template #noPermAgents>
            <span class="no-permission">No permission</span>
          </ng-template>
          <span class="label">
            <mat-icon>check_circle</mat-icon>
            Active / Total Agents
          </span>
        </mat-card-content>
      </mat-card>
    </div>

    <div class="co co-25">
      <mat-card class="mat-card-box">
        <mat-card-content>
          <div class="icon-wrapper point" [routerLink]="['/tasks/show-tasks']">
            <mat-icon>checklist</mat-icon>
          </div>
          <h3>Tasks</h3>
          <span *ngIf="canReadTasks; else noPermTasks" class="value">
            {{ completedTasks.toLocaleString() }} / {{ totalTasks.toLocaleString() }}
          </span>
          <ng-template #noPermTasks>
            <span class="no-permission">No permission</span>
          </ng-template>
          <span class="label">
            <mat-icon>check_circle</mat-icon>
            Completed / Total Tasks
          </span>
        </mat-card-content>
      </mat-card>
    </div>

    <div class="co co-25">
      <mat-card class="mat-card-box">
        <mat-card-content>
          <div class="icon-wrapper point" [routerLink]="['/tasks/supertasks']">
            <mat-icon>checklist</mat-icon>
          </div>
          <h3>Supertasks</h3>
          <span *ngIf="canReadTasks; else noPermSupertasks" class="value">
            {{ completedSupertasks.toLocaleString() }} / {{ totalSupertasks.toLocaleString() }}
          </span>
          <ng-template #noPermSupertasks>
            <span class="no-permission">No permission</span>
          </ng-template>
          <span class="label">
            <mat-icon>check_circle</mat-icon>
            Completed / Total Supertasks
          </span>
        </mat-card-content>
      </mat-card>
    </div>

    <div class="co co-25">
      <mat-card class="mat-card-box">
        <mat-card-content>
          <div class="icon-wrapper point" [routerLink]="['/hashlists/show-cracks']">
            <mat-icon>lock_open</mat-icon>
          </div>
          <h3>Cracks</h3>
          <span *ngIf="canReadCracks; else noPermCracks" class="value">
            {{ totalCracks.toLocaleString() }}
          </span>
          <ng-template #noPermCracks>
            <span class="no-permission">No permission</span>
          </ng-template>
          <span class="label">
            <mat-icon>event_available</mat-icon>
            Last 7 days
          </span>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <div
    [ngClass]="{
      'ro-2': true,
      'ro-m': screenM,
      'ro-l': screenL,
      'ro-s': screenS,
      'ro-xs': screenXS,
      'ro-xl': screenXL
    }"
  >
    <div class="co co-100">
      <div
        id="pcard"
        class="app-echarts"
        style="height: 250px; display: flex; align-items: center; justify-content: center;"
      >
        <ng-container *ngIf="canReadCracks; else noPermChart">
          <!-- Chart will render here -->
        </ng-container>
        <ng-template #noPermChart>
          <span class="no-permission">No permission to view chart data</span>
        </ng-template>
      </div>

      <div class="chart-controls">
        <span *ngIf="lastUpdated">Last updated: {{ lastUpdated }}</span>
        <ng-container *ngIf="!refreshPage">
          <button mat-button (click)="setAutoreload(true)" matTooltip="Enable Auto Reload">
            <mat-icon>refresh</mat-icon>
          </button>
        </ng-container>
        <ng-container *ngIf="refreshPage">
          <button mat-button (click)="setAutoreload(false)" matTooltip="Pause Auto Reload">
            <mat-icon>pause_circle_outline</mat-icon>
          </button>
        </ng-container>
      </div>
    </div>
  </div>

  <div
    [ngClass]="{
      'ro-3': true,
      'ro-m': screenM,
      'ro-l': screenL,
      'ro-s': screenS,
      'ro-xs': screenXS,
      'ro-xl': screenXL
    }"
  >
    <div class="co co-100">
      <mat-card class="project-info">
        <mat-card-content>
          Hashtopolis is available on
          <a href="https://github.com/hashtopolis" target="_blank" rel="noopener">Github</a
          >. To get information about how to use it, please visit the
          <a href="https://github.com/hashtopolis/server/wiki" target="_blank" rel="noopener">Wiki</a>
          or
          <a href="https://discord.com/invite/S2NTxbz" target="_blank" rel="noopener">Discord</a
          >.
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
